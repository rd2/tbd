### [KIVA](https://bigladdersoftware.com/epx/docs/9-6/engineering-reference/ground-heat-transfer-calculations-using-kiva.html)

A specialized library that accurately - and very efficiently - handles foundation heat transfer within EnergyPlus. For designers, it offers several practical features that make it a one-stop solution for most projects:  

- multiple insulation configurations
- custom thermal breaks e.g., around slab edges
- sloped terrain & walk-out basements

Only a few _hard_ limitations prevent its systematic use by designers, notably KIVA's current inability to integrate [radiant slab heating](https://github.com/NREL/EnergyPlus/issues/6576). The _softer_ challenges of using KIVA have more to do with managing inputs (especially with highly-articulated building configurations) - this is where TBD comes into play.

### OpenStudio

The OpenStudio SDK indeed offers access to [KIVA inputs](https://openstudio-sdk-documentation.s3.amazonaws.com/cpp/OpenStudio-3.3.0-doc/model/html/classopenstudio_1_1model_1_1_foundation_kiva.html), yet unfortunately this is not widely supported by third-party apps based on the SDK - including the _OpenStudio Application_ itself. In a nutshell, TBD supports OpenStudio users interested in using KIVA by automatically generating valid KIVA inputs behind the scenes. For most cases, relying on the _Apply Measures Now_ mode (see [Basics](./basics.html "Basic TBD workflow")) is recommended - it's likely that TBD's default insulation configurations (see below) will need some manual tweaking before launching an EnergyPlus simulation. To tweak TBD-generated KIVA inputs, it's important to CHECK the _Alter OpenStudio model_ option under _Apply Measures Now_ (see _Menu Options_ below).

__Settings__: The very first thing TBD does is populate an OpenStudio model with a template for KIVA [settings](https://openstudio-sdk-documentation.s3.amazonaws.com/cpp/OpenStudio-3.3.0-doc/model/html/classopenstudio_1_1model_1_1_foundation_kiva_settings.html) - like soil conductivity. This is usually not required (the default, autogenerated KIVA settings are fine), but their explicit inclusion in an OpenStudio model offers easy access to further tweak them by hand - if required.

__Foundations__: KIVA requires that OpenStudio surfaces - tagged with _Foundation_ as a boundary condition (slabs, basement walls) - reference new _KIVA foundation_ objects in the OpenStudio model. This is not necessarily a one-to-one match - basement walls need to point to the same _foundation_ object as the basement floor they're connected to. So the second step TBD carries out is to autogenerate unique _KIVA foundation_ objects per _foundation_ floor surface, and then link up any _foundation_ (basement) walls each floor surface is connected to. For fully-enclosed geometries, TBD keeps track of which individual wall is connected to which floor, and along which unique edge. This topological consistency - offered behind the scenes by Topolys - translates into time savings (as geometry _take-offs_ are not required) and minimizes risk through automation.

__Exposed perimeters__: Not done yet. KIVA may also require users to link aforementioned _KIVA foundation_ objects to new _KIVA exposed perimeter_ objects. Imagine a project built on a sloped terrain, with its front entrance at street level, yet the back service entrance a full story below. The lower-level spaces may have basement floors, (front) basement walls, (side) _interzone_ partitions, and finally (back) walls facing the outdoor air. KIVA allows for such complexity, yet requires from users the total length of slab edges along outdoor-facing walls. Just as TBD automatically links basement walls to the right _KIVA foundation_ objects, TBD automatically generates new _KIVA exposed perimeter_ objects and correctly sets the right perimeter lengths - for fully-enclosed geometries. Again, this is straightforward as TBD already keeps track of each unique edge linking each outdoor-facing wall to each slab - saving time and reducing risk through automation.

__Insulation configurations__: TBD must make some initial guesswork when it comes to full or partial insulation coverage. For instance, TBD assumes that _foundation_ (basement) walls already reference full-height, insulated constructions in OpenStudio. This may not be the case, as many building codes only require partially-insulated basement walls. For floors, TBD assumes that referenced constructions are not insulated at all. Yet for slab-on-grade cases, TBD does generate 2-ft (600 mm) of perimeter insulation (1-inch or 25.4 mm of XPS) for each corresponding _foundation_ object. This is a typical circa-1980 slab-on-grade setup, which may also not reflect design intent. After autogenerating KIVA inputs via TBD in _Apply Measures Now_ mode, users may need to tweak an OpenStudio model using a text editor like [Atom](https://atom.io) and modify autogenerated _KIVA foundation_ objects (including insulation configurations) to correctly reflect design intent.

### Menu options

TBD offers 2 checkboxes to autogenerate KIVA inputs (see [Basics](./basics.html "Basic TBD workflow")), again ideally under _Apply Measures Now_ mode:  

- for surfaces only with _Foundation_ boundary conditions
- for surfaces with either _Foundation_ or _Ground_ boundary conditions

The latter is recommended for most cases - OpenStudio often sets _Ground_ as outside boundary conditions for lower floor surfaces by default. Once KIVA inputs are permanently added to an OpenStudio model (by CHECKING the _Alter OpenStudio model_ option), and maybe subsequently altered by hand if needed, users can then safely run EnergyPlus simulations - hopefully again with TBD handling _major_, above-grade thermal bridges.

One last (yet very important) point: when autogenerating KIVA inputs (to subsequently edit by hand) in _Apply Measures Now_ mode with the _Alter OpenStudio model_ option, users should ideally select the __Default thermal bridge (set)__ pull-down menu option _"(non thermal bridging)"_, which prevents TBD from _derating_ any above-grade surfaces. It is usually not desirable to permanently _derate_ opaque surfaces this way.

### BTW

KIVA support offered by TBD is loosely adapted from a published NREL simulation [test](https://github.com/NREL/OpenStudio-resources/blob/develop/model/simulationtests/foundation_kiva.rb), yet is generalized here to accommodate arbitrary model geometries.

[back](../index.html "Thermal Bridging & Derating")  
