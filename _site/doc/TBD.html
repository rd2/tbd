<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Module: TBD
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "TBD";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo;
    
    
    <span class="title">TBD</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: TBD
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/tbd/log.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>In most cases, critical (and many non-critical) OSM anomalies would be caught by EnergyPlus at the start of a simulation (e.g., 5-sided windows). As TBD is is designed to run &#39;standalone&#39; (e.g. Apply Measures Now), TBD shouldn&#39;t (or couldn&#39;t) strictly rely on EnergyPlus to catch such errors (and somehow warn users of potentially invalid results). TBD is designed to minimally log warnings, as well as non-fatal &amp; fatal errors, that may put its internal processes at risk (e.g., red-flagging 5-sided windows in the .osm file). The presence of FATAL, ERROR or WARNING log entries in a generated TBD JSON file (saved under an OSM project &#39;files&#39; folder) should be interpreted as &#39;bad&#39;, something to look into and/or remediate.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="DEBUG-constant" class="">DEBUG =
          <div class="docstring">
  <div class="discussion">
    
<p>EnergyPlus will run with out-of-range material or fluid properties. This triggers an ERROR in EnergyPlus, but it&#39;s up to users to decide what to do with simulation results. TBD attempts something similar.</p>

<p>FATAL errors halts all TBD processes and prevents OpenStudio from launching an EnergyPlus simulation. TBD will have but a few checks which would raise FATAL cases. These would be mainly linked to missing, structurally invalid or incomplete OSM or TBD files (or key file entries) e.g., badly structured TBD JSON file, invalid OSM vertex transformation parameters, a missing or incomplete TBD &#39;building&#39; PSI set.</p>

<p>The vast majority of TBD checks would log non-fatal ERROR messages when encountering invalid OSM or TBD file entries (structurally sound, yet invalid vis-Ã -vis TBD or EnergyPlus limitations). In such cases, the object is simply ignored. TBD pursues its (otherwise valid) calculations, and OpenStudio will ultimately launch an EnergyPlus simulation. If a simulation indeed ran (ultimately a go/no-go by the EnergyPlus simulation engine), it would be up to users to decide if the simulation results were valid, useful, etc. given the context. An example would be TBD ignoring the thermal bridging effects of 4x window edges, when the window has invalid frame &amp; divider (optional) inputs in the OSM. The insulation material of the host surface may nonetheless be derated by the edges of its other (valid) windows, but not by those of the poorly-defined one. In short, non-fatal ERROR logs point to bad input a user can fix.</p>

<p>TBD will emit very few WARN log messages. TBD warnings are mainly triggered from inherit limitations of the underlying derating methodology (something the user has limited control over beforehand). For instance, a surface the size of a dinner plate has a very limited area to accommodate the additional heat loss from thermal bridging (which may trigger a WARNING log message). It&#39;s usually not a good idea to have such small surfaces in an OSM, but neither OpenStudio nor EnergyPlus will necessarily warn users of such occurrences. It&#39;s up to users to decide on the suitable course of action.</p>

<p>TBD also offers the possiblity of logging informative messages (although currently unused). Finally, TBD integrates a number of sanity checks to ensure Ruby doesn&#39;t crash (e.g. invalid access to uninitialized variables), especially for lower-level functions. When this occurs, there are safe fallbacks and exists, but the DEBUG error is nonetheless logged by TBD. DEBUG errors are almost always signs of a bug (to be fixed). This is for strictly made available for development purposes - TBD does not offer a &#39;production debugging&#39; mode.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="INFO-constant" class="">INFO =
          <div class="docstring">
  <div class="discussion">
    
<p>for debugging</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>2</span></pre></dd>
      
        <dt id="WARN-constant" class="">WARN =
          <div class="docstring">
  <div class="discussion">
    
<p>informative</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>3</span></pre></dd>
      
        <dt id="ERROR-constant" class="">ERROR =
          <div class="docstring">
  <div class="discussion">
    
<p>e.g. unable to derate a material (too thin, too small)</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>4</span></pre></dd>
      
        <dt id="FATAL-constant" class="">FATAL =
          <div class="docstring">
  <div class="discussion">
    
<p>e.g. out-of-range material k, 5-sided window, bad TBD JSON entry</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>5</span></pre></dd>
      
        <dt id="logs-classvariable" class="">@@logs =
          <div class="docstring">
  <div class="discussion">
    
<p>e.g. fail to find/open OSM file, fail to translate file to OSM</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="log_level-classvariable" class="">@@log_level =
          
        </dt>
        <dd><pre class="code"><span class='const'><span class='object_link'><a href="#INFO-constant" title="TBD::INFO (constant)">INFO</a></span></span></pre></dd>
      
        <dt id="tag-classvariable" class="">@@tag =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="msg-classvariable" class="">@@msg =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="log_status-classvariable" class="">@@log_status =
          <div class="docstring">
  <div class="discussion">
    
<p>Highest log level reached so far in TBD process sequence.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
    </dl>
  







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clean!-class_method" title="clean! (class method)">.<strong>clean!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#error%3F-class_method" title="error? (class method)">.<strong>error?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fatal%3F-class_method" title="fatal? (class method)">.<strong>fatal?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-class_method" title="log (class method)">.<strong>log</strong>(log_level, message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log_level-class_method" title="log_level (class method)">.<strong>log_level</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logs-class_method" title="logs (class method)">.<strong>logs</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#msg-class_method" title="msg (class method)">.<strong>msg</strong>(log_status)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_log_level-class_method" title="set_log_level (class method)">.<strong>set_log_level</strong>(log_level)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-class_method" title="status (class method)">.<strong>status</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tag-class_method" title="tag (class method)">.<strong>tag</strong>(log_level)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#warn%3F-class_method" title="warn? (class method)">.<strong>warn?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="clean!-class_method">
  
    .<strong>clean!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133
134
135</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 131</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_clean!'>clean!</span>
  <span class='cvar'>@@log_level</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#INFO-constant" title="TBD::INFO (constant)">INFO</a></span></span>
  <span class='cvar'>@@log_status</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='cvar'>@@logs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="error?-class_method">
  
    .<strong>error?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 99</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_error?'>error?</span>
  <span class='kw'>return</span> <span class='cvar'>@@log_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#ERROR-constant" title="TBD::ERROR (constant)">ERROR</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="fatal?-class_method">
  
    .<strong>fatal?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 103</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_fatal?'>fatal?</span>
  <span class='kw'>return</span> <span class='cvar'>@@log_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#FATAL-constant" title="TBD::FATAL (constant)">FATAL</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-class_method">
  
    .<strong>log</strong>(log_level, message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 121</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_log'>log</span><span class='lparen'>(</span><span class='id identifier rubyid_log_level'>log_level</span><span class='comma'>,</span> <span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='comment'># puts &quot;TBD: (#{TBD.tag(log_level)} vs #{TBD.tag(@@log_level)}) &#39;#{message}&#39;&quot;
</span>  <span class='kw'>if</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&gt;=</span> <span class='cvar'>@@log_level</span>
    <span class='cvar'>@@logs</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span> <span class='label'>level:</span> <span class='id identifier rubyid_log_level'>log_level</span><span class='comma'>,</span> <span class='label'>message:</span> <span class='id identifier rubyid_message'>message</span> <span class='rbrace'>}</span>

    <span class='comment'># May go from INFO to WARN, or to ERROR, or to FATAL
</span>    <span class='cvar'>@@log_status</span> <span class='op'>=</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='kw'>if</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&gt;</span> <span class='cvar'>@@log_status</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log_level-class_method">
  
    .<strong>log_level</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 87</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_log_level'>log_level</span>
  <span class='cvar'>@@log_level</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="logs-class_method">
  
    .<strong>logs</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 83</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_logs'>logs</span>
  <span class='cvar'>@@logs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="msg-class_method">
  
    .<strong>msg</strong>(log_status)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 112</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_msg'>msg</span><span class='lparen'>(</span><span class='id identifier rubyid_log_status'>log_status</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='cvar'>@@msg</span><span class='lbracket'>[</span><span class='id identifier rubyid_log_status'>log_status</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&gt;=</span> <span class='const'><span class='object_link'><a href="#DEBUG-constant" title="TBD::DEBUG (constant)">DEBUG</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="#FATAL-constant" title="TBD::FATAL (constant)">FATAL</a></span></span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_log_level-class_method">
  
    .<strong>set_log_level</strong>(log_level)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 117</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_set_log_level'>set_log_level</span><span class='lparen'>(</span><span class='id identifier rubyid_log_level'>log_level</span><span class='rparen'>)</span>
  <span class='cvar'>@@log_level</span> <span class='op'>=</span> <span class='id identifier rubyid_log_level'>log_level</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="status-class_method">
  
    .<strong>status</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 91</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_status'>status</span>
  <span class='cvar'>@@log_status</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tag-class_method">
  
    .<strong>tag</strong>(log_level)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


107
108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 107</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_tag'>tag</span><span class='lparen'>(</span><span class='id identifier rubyid_log_level'>log_level</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='cvar'>@@tag</span><span class='lbracket'>[</span><span class='id identifier rubyid_log_level'>log_level</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&gt;=</span> <span class='const'><span class='object_link'><a href="#DEBUG-constant" title="TBD::DEBUG (constant)">DEBUG</a></span></span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_log_level'>log_level</span> <span class='op'>&lt;=</span> <span class='const'><span class='object_link'><a href="#FATAL-constant" title="TBD::FATAL (constant)">FATAL</a></span></span>
  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="warn?-class_method">
  
    .<strong>warn?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/tbd/log.rb', line 95</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_warn?'>warn?</span>
  <span class='kw'>return</span> <span class='cvar'>@@log_status</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#WARN-constant" title="TBD::WARN (constant)">WARN</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Dec 13 12:13:55 2021 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-2.7.2).
</div>

    </div>
  </body>
</html>